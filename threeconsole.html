<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coda Oedipus</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            font-family: 'Arial', monospace;
            font-size: 12px;
            color: #ffffff;
        }

        .video-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            overflow: hidden;
        }

        .video-background video {
            min-width: 100%;
            min-height: 100%;
            opacity: 1;
            object-fit: cover;
        }

        .consoles-container {
            position: relative;
            height: 100vh;
        }

        .main-consoles {
            display: flex;
            height: 100%;
            gap: 0px;
        }

        .console {
            flex: 1;
            height: 100%;
            padding: 20px;
            box-sizing: border-box;
            background-color: rgba(0, 0, 0, 0);
            overflow-y: auto;
            position: relative;
            border: 1px solid #000000;
            z-index: 1;
        }

        .floating-console {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0);
            border: 0px solid #ffffff;
            z-index: 1;
            padding: 20px;
            box-sizing: border-box;
            overflow-y: auto;
        }

        .typing-text {
            line-height: 1.5;
            white-space: pre-wrap;
        }

        .cursor {
            display: inline-block;
            width: 2px;
            height: 2px;
            background-color: #000000;
            animation: blink 1s step-end infinite;
            vertical-align: middle;
        }

        @keyframes blink {
            from, to { background-color: transparent }
            50% { background-color: #ffffff; }
        }

        ::-webkit-scrollbar {
            width: 0px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0);
        }0

        ::-webkit-scrollbar-thumb {
            background: #ffffff;
        }
    </style>
</head>
<body>
    <div class="video-background">
        <video autoplay muted loop>
            <source src="exquisiteCorpse1.compressed.mp4" type="video/mp4">
        </video>
    </div>

    <div class="consoles-container">
        <div class="main-consoles">
            <div class="console">
                <div id="box1" class="typing-text"></div>
                <span class="cursor"></span>
            </div>
            <div class="console">
                <div id="box2" class="typing-text"></div>
                <span class="cursor"></span>
            </div>
        </div>
        
        <div class="floating-console">
            <div id="box3" class="typing-text"></div>
            <span class="cursor"></span>
        </div>
    </div>

    <script>
           const textSources = {
            box1: [
                "// Thematic Influence Class\n",
                "class ThematicInfluence {\n",
                "  constructor(type, intensity, effect) {\n",
                "    this.type = type;\n",
                "    this.intensity = intensity;\n",
                "    this.effect = effect;\n",
                "  }\n",
                "}\n\n",
                "// Story Event Class\n",
                "class StoryEvent {\n",
                "  constructor(action, actors, consequence, influence) {\n",
                "    this.action = action;\n",
                "    this.actors = actors;\n",
                "    this.consequence = consequence;\n",
                "    this.influence = influence;\n",
                "    this.children = [];\n",
                "  }\n",
                "}\n\n",
                "// Core Forces Definition\n",
                "const Forces = {\n",
                "  FATE: new ThematicInfluence('FATE', 0.9, 'FORCES_ACTION'),\n",
                "  HUBRIS: new ThematicInfluence('HUBRIS', 0.7, 'BLINDS_LOGIC'),\n",
                "  GRIEF: new ThematicInfluence('GRIEF', 0.95, 'SELF_DESTRUCTION'),\n",
                "  DUTY: new ThematicInfluence('DUTY', 0.6, 'MAINTAINS_ORDER')\n",
                "};\n\n",
                "// Create Oedipus Journey\n",
                "function createOedipusJourney() {\n",
                "  const root = new StoryEvent(\n",
                "    'PROPHECY',\n",
                "    ['LAIUS', 'JOCASTA'],\n",
                "    'ABANDONMENT',\n",
                "    Forces.FATE\n",
                "  );\n\n",
                "  const adoption = new StoryEvent(\n",
                "    'RESCUE',\n",
                "    ['SHEPHERD', 'POLYBUS'],\n",
                "    'ADOPTION',\n",
                "    Forces.FATE\n",
                "  );\n",
                "  root.children.push(adoption);\n\n",
                "  const flight = processHubrisAction(\n",
                "    'FLIGHT',\n",
                "    'OEDIPUS',\n",
                "    'PATRICIDE',\n",
                "    Forces.HUBRIS\n",
                "  );\n",
                "  adoption.children.push(flight);\n\n",
                "  const sphinx = new StoryEvent(\n",
                "    'RIDDLE_SOLVED',\n",
                "    ['OEDIPUS', 'SPHINX'],\n",
                "    'KINGSHIP',\n",
                "    Forces.HUBRIS\n",
                "  );\n",
                "  flight.children.push(sphinx);\n\n",
                "  const marriage = processFatedAction(\n",
                "    'MARRIAGE',\n",
                "    ['OEDIPUS', 'JOCASTA'],\n",
                "    'INCEST',\n",
                "    Forces.FATE\n",
                "  );\n",
                "  sphinx.children.push(marriage);\n\n",
                "  const plagueInvestigation = new StoryEvent(\n",
                "    'INVESTIGATION',\n",
                "    ['OEDIPUS', 'TIRESIAS'],\n",
                "    'REVELATION',\n",
                "    Forces.FATE\n",
                "  );\n",
                "  marriage.children.push(plagueInvestigation);\n\n",
                "  const truthRealization = processGrief(\n",
                "    'TRUTH_REALIZED',\n",
                "    'OEDIPUS',\n",
                "    0.99\n",
                "  );\n",
                "  plagueInvestigation.children.push(truthRealization);\n\n",
                "  const selfBlinding = new StoryEvent(\n",
                "    'SELF_BLINDING',\n",
                "    ['OEDIPUS'],\n",
                "    'EXILE',\n",
                "    Forces.GRIEF\n",
                "  );\n",
                "  truthRealization.children.push(selfBlinding);\n\n",
                "  const transferPower = processDutyTransfer(\n",
                "    ['CREON'],\n",
                "    'THEBES_GOVERNANCE'\n",
                "  );\n",
                "  selfBlinding.children.push(transferPower);\n\n",
                "  return root;\n",
                "}\n\n",
                "// Execute the algorithm\n",
                "const tragicHeroAlgorithm = createOedipusJourney();\n",
                "console.log(tragicHeroAlgorithm);"
            ],
            box2: [
               "aaaaa"
            ]
        };


        function createTyper(elementId, speed = 50, loopDelay = 2000) {
            let index = 0;
            const element = document.getElementById(elementId);
            const lines = textSources[elementId];
            
            function typeLine() {
                if (index < lines.length) {
                    const line = lines[index];
                    let charIndex = 0;
                    
                    function typeChar() {
                        if (charIndex < line.length) {
                            element.innerHTML += line.charAt(charIndex);
                            charIndex++;
                            setTimeout(typeChar, speed);
                        } else {
                            element.innerHTML += '\n';
                            index++;
                            setTimeout(typeLine, speed * 2);
                        }
                        element.parentElement.scrollTop = element.parentElement.scrollHeight;
                    }
                    
                    typeChar();
                } else {
                    setTimeout(() => {
                        element.innerHTML = '';
                        index = 0;
                        typeLine();
                    }, loopDelay);
                }
            }
            
            typeLine();
        }

        window.onload = () => {
            createTyper('box1', 30, 1500);
            createTyper('box2', 35, 1800);
            createTyper('box3', 25, 2500);
        };
    </script>
</body>
</html>
